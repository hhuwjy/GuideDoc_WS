**MQTT_set 配置文件说明**
############################################################################################################


    PLCnext Engineer工程中采集到的数据通过MQTT APP上送至平台，只需简单修改MQTT_set配置文件，即可完成上送。


一、Json字段说明
===========================================================================================================


    **"ConnectSetting"为MQTT连接设置，其中各字段的含义为：**

        "ClientId"：客户端ID（可任意取名）
  
        "IpAdress"：云平台的IP地址

        "Port"：云平台的端口号

        "UserName”：用户名

        "UserPasswd"：密码

        “UseTls”：是否使用mqtts（**默认为true**）


    **"IecData"为上送数据配置，其中各字段的含义为：**

        "SendTopic"：topic主题

        "GrpcVarName"：PLCnext Engineer中变量名（需建立外部变量，"Arp.Plc.Eclr/"前缀保持不变，变量名写在后面，如 "Arp.Plc.Eclr/test"）


    **"FlagVariable"为心跳配置，其中各字段的含义为:**

        "xMqttConnectStatus"：PLCnext与云平台的连接状态（**默认字段，不可修改**）


   
二、云平台配置表
===========================================================================================================

    本项目中包含多个子项目，不同子项目的平台账号与密码有区别，**注意：每个账号只能发布对应的项目数据，无法订阅**

.. list-table::
   :header-rows: 1

   * - 项目名
     - MQTT账号/UserName
     - 密码/UserPasswd
   * - 沈阳中海
     - 1001
     - sskK0*123h5F!457n-R
   * - 天津中海
     - 1002
     - 12Qw3^t13G&6n#23N
   * - 唐山远洋城
     - 1003
     - aso134g!d63Q12&5t&C
   * - 天津河东万象美
     - 1004
     - jsksqN3fsw8R^16x@X
   * - 廊坊广阳万象美+万达+百货
     - 1005
     - loqsD9s$21@is82%3u!M
   * - 济南融创茂
     - 1006
     - nmsDb8_9182e0J%021f-A
   * - 沈阳盛京龙城
     - 1007
     - lishaLj3#u03ss91M#8x*B
   * - 通化欧亚
     - 1008
     - jqhsNw0&8891f8N$0w%D
   * - 青岛李沧万达
     - 1009
     - j18289918gujdd#D^1z^N
   * - 济南魏家庄万象美
     - 1010
     - lojs11ddsLsjjsm7!t8L*3y$Q
   * - 银川碧桂园
     - 1011
     - ka1udjsXg0^fssjjs6H%6c!Z








三、注意事项
===========================================================================================================

    1) IecData为数组字段，若有多个需要上送的变量，则按照示例格式复制数组内容即可，示例如下：

    .. image:: ../docs/images/Json.png
       


    2) 用户修改完Json配置后，建议检查一下json格式，格式不正确会导致MQTT APP报错
    
    推荐：`Json文档格式在线检查 <https://www.bejson.com/explore/index_new/#google_vignette>`_


    3) 以沈阳中海项目为例，按照设备类型，分了四个数据类型：

        其他设备（除热泵机组、热泵电表、C8000以外的设备）-数据类型1

        热泵机组-数据类型2

        热泵电表组-数据类型3

        C8000-数据类型4


     每个数据对应对应一个MQTT topic，比如沈阳中海项目中数据类型一对应的topic为 **r6sa3c/1001/data/type/10000**，
     
     其中：
    
        1001表示项目标识号（见设备唯一标识规则）
 
        10000表示数据类型一，10001/10002/10003依次类推
        

    4) 更新完Json文件后，可利用TransferFile小工具将更新后的Json文件传输至PLCnext控制器中


    


